<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Memory | The AssemblyScript Book</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#007acc">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="How to import and export memory, and all the details on its layout.">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preload" href="/assets/js/custom.93ba50cc.js" as="script"><link rel="preload" href="/assets/css/0.styles.aab9476b.css" as="style"><link rel="preload" href="/assets/js/app.5bed4dc4.js" as="script"><link rel="preload" href="/assets/js/12.3c2d6cf1.js" as="script"><link rel="preload" href="/assets/js/4.446cbf45.js" as="script"><link rel="preload" href="/assets/js/23.10a9bc30.js" as="script"><link rel="prefetch" href="/assets/js/10.c4eefcd7.js"><link rel="prefetch" href="/assets/js/11.46661278.js"><link rel="prefetch" href="/assets/js/13.0affc05f.js"><link rel="prefetch" href="/assets/js/14.99b906be.js"><link rel="prefetch" href="/assets/js/15.1acd0ef2.js"><link rel="prefetch" href="/assets/js/16.323c95ca.js"><link rel="prefetch" href="/assets/js/17.1438624f.js"><link rel="prefetch" href="/assets/js/18.8ef7cc4b.js"><link rel="prefetch" href="/assets/js/19.68fd1ce8.js"><link rel="prefetch" href="/assets/js/20.d5d19104.js"><link rel="prefetch" href="/assets/js/21.8900d2ee.js"><link rel="prefetch" href="/assets/js/22.0bfe5a4b.js"><link rel="prefetch" href="/assets/js/24.0e7e5064.js"><link rel="prefetch" href="/assets/js/25.b22cd479.js"><link rel="prefetch" href="/assets/js/26.cbe5598a.js"><link rel="prefetch" href="/assets/js/27.829555d4.js"><link rel="prefetch" href="/assets/js/28.71ecf13c.js"><link rel="prefetch" href="/assets/js/29.c89c9893.js"><link rel="prefetch" href="/assets/js/30.4131bb10.js"><link rel="prefetch" href="/assets/js/31.fe30eaaa.js"><link rel="prefetch" href="/assets/js/32.53161116.js"><link rel="prefetch" href="/assets/js/33.75612c90.js"><link rel="prefetch" href="/assets/js/34.a05f1f66.js"><link rel="prefetch" href="/assets/js/35.a3256c50.js"><link rel="prefetch" href="/assets/js/36.98f3a28e.js"><link rel="prefetch" href="/assets/js/37.9157ea56.js"><link rel="prefetch" href="/assets/js/38.95a75c36.js"><link rel="prefetch" href="/assets/js/39.830491ce.js"><link rel="prefetch" href="/assets/js/40.0a04d4f8.js"><link rel="prefetch" href="/assets/js/41.545a24ca.js"><link rel="prefetch" href="/assets/js/42.238332b7.js"><link rel="prefetch" href="/assets/js/43.ea40ca12.js"><link rel="prefetch" href="/assets/js/5.934c18a1.js"><link rel="prefetch" href="/assets/js/6.cf6e0a7b.js"><link rel="prefetch" href="/assets/js/7.4637a5cc.js"><link rel="prefetch" href="/assets/js/8.eb071be2.js"><link rel="prefetch" href="/assets/js/9.127cce51.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6410d9e6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aab9476b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="le"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icon.svg" alt="The AssemblyScript Book" class="logo"> <span class="site-name can-hide">The AssemblyScript Book</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/AssemblyScript/examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Examples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://assemblyscript.slack.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack (with invite)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          General
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://discordapp.com/invite/nEFErF8" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebAssembly Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/AssemblyScript/examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Examples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://assemblyscript.slack.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack (with invite)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          General
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://discordapp.com/invite/nEFErF8" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebAssembly Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/basics.html" class="sidebar-link">Basics</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/compiler.html" class="sidebar-link">Compiler</a></li><li><a href="/types.html" class="sidebar-link">Types</a></li><li><a href="/environment.html" class="sidebar-link">Environment</a></li><li><a href="/exports-and-imports.html" class="sidebar-link">Exports and imports</a></li><li><a href="/loader.html" class="sidebar-link">Loader</a></li><li><a href="/built-with-assemblyscript.html" class="sidebar-link">Built with AssemblyScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/memory.html" aria-current="page" class="active sidebar-link">Memory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memory.html#importing-memory" class="sidebar-link">Importing memory</a></li><li class="sidebar-sub-header"><a href="/memory.html#accessing-memory-during-instantiation" class="sidebar-link">Accessing memory during instantiation</a></li><li class="sidebar-sub-header"><a href="/memory.html#memory-regions" class="sidebar-link">Memory regions</a></li><li class="sidebar-sub-header"><a href="/memory.html#internals" class="sidebar-link">Internals</a></li></ul></li><li><a href="/runtime.html" class="sidebar-link">Runtime</a></li><li><a href="/peculiarities.html" class="sidebar-link">Peculiarities</a></li><li><a href="/portability.html" class="sidebar-link">Portability</a></li><li><a href="/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/development.html" class="sidebar-link">Development</a></li><li><a href="/transforms.html" class="sidebar-link">Transforms</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="memory"><a href="#memory" class="header-anchor">#</a> Memory</h1> <p>Similar to other languages that use linear memory, all data in AssemblyScript becomes stored at a specific memory offset so other parts of the program can read and modify it.</p> <h2 id="importing-memory"><a href="#importing-memory" class="header-anchor">#</a> Importing memory</h2> <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Memory" target="_blank" rel="noopener noreferrer">WebAssembly.Memory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> instance used by your program can be imported from the host by using the <code>--importMemory</code> flag on the command line. The module will then expect an import named <code>memory</code> within the <code>env</code> module. An imported memory becomes the singleton memory of the module and can be accessed in the same way as a non-imported memory. One thing to take care of is that if the module defines <code>data</code> segments, it will place these into the imported memory upon instantiation of the module, which must be taken into account when pre-populating the memory externally (i.e., utilize<code>--memoryBase</code> to reserve some space as described in <a href="/memory.html#memory-regions">Memory Regions</a> below). Likewise, a module exports its memory as <code>memory</code> by default, unless disabled with <code>--noExportMemory</code>.</p> <h2 id="accessing-memory-during-instantiation"><a href="#accessing-memory-during-instantiation" class="header-anchor">#</a> Accessing memory during instantiation</h2> <p>There is one special case to mention when it comes to accessing memory while top-level statements are still executing. Instantiation must return first so one can get a hold of the exported memory instance, hence it is not possible to print a string externally before this happens, <em>unless</em> memory has been imported or an explicit start function has been exported using the <code>--explicitStart</code> option.</p> <p>Using the <code>--explicitStart</code> option essentially delays all top-level statements until <code>_start</code> is called externally, which must happen before calling any other exports, so one can get a hold of the memory early, before top-level statements run, even if it has not been imported.</p> <h2 id="memory-regions"><a href="#memory-regions" class="header-anchor">#</a> Memory regions</h2> <p>Internally, there are two regions of memory the compiler is aware of:</p> <h3 id="static-memory"><a href="#static-memory" class="header-anchor">#</a> Static memory</h3> <p>Memory starts with static data, like strings and arrays (of constant values) the compiler encountered while translating the program. Unlike in other languages, there is no concept of a stack in AssemblyScript and it instead relies on WebAssembly's execution stack exclusively.</p> <p>A custom region of memory can be reserved using the <code>--memoryBase</code> option. For example, if one needs an image buffer of exactly N bytes, instead of allocating it one could reserve that space, telling the compiler to place its own static data afterwards, partitioning memory in this order:</p> <table><thead><tr><th style="text-align:left;">Region</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">Reserved memory</td> <td style="text-align:left;">As specified with <code>--memoryBase</code></td></tr> <tr><td style="text-align:left;">Static memory</td> <td style="text-align:left;">Starting right after reserved memory</td></tr> <tr><td style="text-align:left;">Dynamic memory</td> <td style="text-align:left;">Starting right after static memory</td></tr></tbody></table> <h3 id="dynamic-memory"><a href="#dynamic-memory" class="header-anchor">#</a> Dynamic memory</h3> <p>Dynamic memory, commonly known as the heap, is managed by the <a href="/runtime.html">AssemblyScript runtime</a>, at runtime. When a chunk of memory is requested by the program, the runtime's memory manager reserves a suitable region and returns a pointer to it to the program. The lifetime of objects allocated from the heap is then tracked by the runtime's garbage collector, and once it is not needed anymore, the object's chunk of memory is returned to the memory manager for reuse.</p> <h2 id="internals"><a href="#internals" class="header-anchor">#</a> Internals</h2> <p>When writing high level AssemblyScript, the above is pretty much everything one needs to know. But there is a low level perspective of course.</p> <p>When implementing low-level code, the end of static memory respectively the start of dynamic memory can be obtained by reading the <code>__heap_base</code> global. Memory managers for example do this to decide where to place their bookkeeping structures before partitioning the heap. <a href="https://webassembly.github.io/spec/core/syntax/instructions.html#memory-instructions" target="_blank" rel="noopener noreferrer">WebAssembly is specifiend to use little-endian<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and as a result, so is AssemblyScript.</p> <p>The memory manager guarantees an alignment of 16 bytes, so an <code>ArrayBuffer</code>, which can be the backing buffer of multiple views, always fits up to <code>v128</code> values with native alignment.</p> <p>Objects in AssemblyScript have a common hidden header used by the runtime to keep track of them. The header includes information about the block used by the memory manager, state information used by the garbage collector, a unique id per concrete class and the data's actual size. The length of a <code>String</code> (id = 1) is computed from that size for example. The header is &quot;hidden&quot; in that the reference to an object points right after it, at the first byte of the object's actual data.</p> <img src="images/managedobjectlayout.svg" alt="Managed Object Layout"> <h4 id="common-header-layout"><a href="#common-header-layout" class="header-anchor">#</a> Common header layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">#mmInfo</td> <td style="text-align:right;">-16</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">General block information</td></tr> <tr><td style="text-align:left;">#gcInfo</td> <td style="text-align:right;">-12</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Reference count etc.</td></tr> <tr><td style="text-align:left;">#rtId</td> <td style="text-align:right;">-8</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Unique id of the concrete class</td></tr> <tr><td style="text-align:left;">#rtSize</td> <td style="text-align:right;">-4</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Size of the data following the header</td></tr></tbody></table> <p>The most basic objects using the common header are <code>ArrayBuffer</code> and <code>String</code>. These do not have any fields but are just data:</p> <h4 id="arraybuffer-layout"><a href="#arraybuffer-layout" class="header-anchor">#</a> ArrayBuffer layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-16</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">[0]</td> <td style="text-align:right;">0</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The first byte</td></tr> <tr><td style="text-align:left;">[1]</td> <td style="text-align:right;">1</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The second byte</td></tr> <tr><td style="text-align:left;">...</td> <td style="text-align:right;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">[N]</td> <td style="text-align:right;">N</td> <td style="text-align:left;">8-bit untyped</td> <td style="text-align:left;">The N-th byte</td></tr></tbody></table> <h4 id="string-layout"><a href="#string-layout" class="header-anchor">#</a> String layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-16</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">[0]</td> <td style="text-align:right;">0</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The first character</td></tr> <tr><td style="text-align:left;">[1]</td> <td style="text-align:right;">2</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The second character</td></tr> <tr><td style="text-align:left;">...</td> <td style="text-align:right;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">[N]</td> <td style="text-align:right;">N &lt;&lt; 1</td> <td style="text-align:left;">u16</td> <td style="text-align:left;">The N-th character</td></tr></tbody></table> <p>Unlike other languages, strings in AssemblyScript use UTF-16 encoding to match common JavaScript APIs in an attempt to avoid re-encoding on every JS-API call. While this helps to reduce the overhead when talking to the host, it can introduce some overhead when integrating AssemblyScript into a C environment where using UTF-16 is not an option (<a href="/stdlib/string.html#utf-16-vs-utf-8">see also</a>).</p> <p>Collections like <code>Array</code>, <code>Map</code> and <code>Set</code> use one or multiple <code>ArrayBuffer</code>s to store their data, but the backing buffer is exposed by the typed array views only because other collections can grow automatically, which would otherwise lead to no longer valid references sticking around.</p> <h4 id="arraybufferview-layout"><a href="#arraybufferview-layout" class="header-anchor">#</a> ArrayBufferView layout</h4> <p>This is not an actual class but a helper to simplify the implementation of the typed array views. Each typed array view like <code>Uint8Array</code> is like a subclass of <code>ArrayBufferView</code> with a static value type attached.</p> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-16</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;">#data</td> <td style="text-align:right;">0</td> <td style="text-align:left;">ArrayBuffer</td> <td style="text-align:left;">Backing buffer reference</td></tr> <tr><td style="text-align:left;">#dataStart</td> <td style="text-align:right;">4</td> <td style="text-align:left;">usize</td> <td style="text-align:left;">Start of the data within .data</td></tr> <tr><td style="text-align:left;">#dataLength</td> <td style="text-align:right;">8</td> <td style="text-align:left;">u32</td> <td style="text-align:left;">Length of the data from .dataStart</td></tr></tbody></table> <h4 id="array-layout"><a href="#array-layout" class="header-anchor">#</a> Array layout</h4> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:right;">Offset</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"></td> <td style="text-align:right;">-16</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">Common header</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:right;">0</td> <td style="text-align:left;">See above</td> <td style="text-align:left;">ArrayBufferView</td></tr> <tr><td style="text-align:left;">.length</td> <td style="text-align:right;">12</td> <td style="text-align:left;">i32</td> <td style="text-align:left;">Mutable length of the data the user is interested in</td></tr></tbody></table> <p>The layouts of <code>Set</code> and <code>Map</code> are a bit more sophisticated and therefore not mentioned here, but feel free to take a look at their sources.</p> <h4 id="notes"><a href="#notes" class="header-anchor">#</a> Notes</h4> <p>One obvious shortcoming of this layout alone is that accessing the values of an array must go through one level of indirection. For example, an <code>arr[i]</code> must first obtain a reference to the backing buffer and only then is able to read the actual value. One possible way to solve this is to make use of the <a href="https://github.com/WebAssembly/multi-value" target="_blank" rel="noopener noreferrer">Multi-value proposal for WebAssembly<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> eventually, lowering typed arrays for example to multiple values that are passed around directly, so the reference to the backing buffer is already on the execution stack. Another is to provide more knowledge about specific structures to Binaryen, so it can cache the reference to the backing buffer as long as the array does not grow, but it is unclear how feasible this is.</p> <p>A more general issue is that AssemblyScript is essentially a compiler on top of another compiler (here. Binaryen), with Binaryen already providing all the utility to do optimizations that we do not want to duplicate. Thus, it is still to decide how to get rid of unnecessary range checks for example. For now, there is the famous <code>unchecked(expression)</code> built-in that explicitly request no bounds checks on indexed access, but this certainly isn't forever.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/AssemblyScript/website/edit/master/src/memory.md" target="_blank" rel="noopener noreferrer">Help us to improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/built-with-assemblyscript.html" class="prev">
        Built with AssemblyScript
      </a></span> <span class="next"><a href="/runtime.html">
        Runtime
      </a>
      →
    </span></p></div> <div class="footer">Copyright © 2020 The AssemblyScript Project | Apache-2.0</div></main></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/custom.93ba50cc.js" defer></script><script src="/assets/js/12.3c2d6cf1.js" defer></script><script src="/assets/js/4.446cbf45.js" defer></script><script src="/assets/js/23.10a9bc30.js" defer></script><script src="/assets/js/app.5bed4dc4.js" defer></script>
  </body>
</html>
