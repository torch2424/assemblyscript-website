<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Loader | The AssemblyScript Book</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#007acc">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="How to make working with an AssemblyScript module more convenient.">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preload" href="/assets/js/custom.93ba50cc.js" as="script"><link rel="preload" href="/assets/css/0.styles.aab9476b.css" as="style"><link rel="preload" href="/assets/js/app.5bed4dc4.js" as="script"><link rel="preload" href="/assets/js/12.3c2d6cf1.js" as="script"><link rel="preload" href="/assets/js/4.446cbf45.js" as="script"><link rel="preload" href="/assets/js/22.0bfe5a4b.js" as="script"><link rel="prefetch" href="/assets/js/10.c4eefcd7.js"><link rel="prefetch" href="/assets/js/11.46661278.js"><link rel="prefetch" href="/assets/js/13.0affc05f.js"><link rel="prefetch" href="/assets/js/14.99b906be.js"><link rel="prefetch" href="/assets/js/15.1acd0ef2.js"><link rel="prefetch" href="/assets/js/16.323c95ca.js"><link rel="prefetch" href="/assets/js/17.1438624f.js"><link rel="prefetch" href="/assets/js/18.8ef7cc4b.js"><link rel="prefetch" href="/assets/js/19.68fd1ce8.js"><link rel="prefetch" href="/assets/js/20.d5d19104.js"><link rel="prefetch" href="/assets/js/21.8900d2ee.js"><link rel="prefetch" href="/assets/js/23.10a9bc30.js"><link rel="prefetch" href="/assets/js/24.0e7e5064.js"><link rel="prefetch" href="/assets/js/25.b22cd479.js"><link rel="prefetch" href="/assets/js/26.cbe5598a.js"><link rel="prefetch" href="/assets/js/27.829555d4.js"><link rel="prefetch" href="/assets/js/28.71ecf13c.js"><link rel="prefetch" href="/assets/js/29.c89c9893.js"><link rel="prefetch" href="/assets/js/30.4131bb10.js"><link rel="prefetch" href="/assets/js/31.fe30eaaa.js"><link rel="prefetch" href="/assets/js/32.53161116.js"><link rel="prefetch" href="/assets/js/33.75612c90.js"><link rel="prefetch" href="/assets/js/34.a05f1f66.js"><link rel="prefetch" href="/assets/js/35.a3256c50.js"><link rel="prefetch" href="/assets/js/36.98f3a28e.js"><link rel="prefetch" href="/assets/js/37.9157ea56.js"><link rel="prefetch" href="/assets/js/38.95a75c36.js"><link rel="prefetch" href="/assets/js/39.830491ce.js"><link rel="prefetch" href="/assets/js/40.0a04d4f8.js"><link rel="prefetch" href="/assets/js/41.545a24ca.js"><link rel="prefetch" href="/assets/js/42.238332b7.js"><link rel="prefetch" href="/assets/js/43.ea40ca12.js"><link rel="prefetch" href="/assets/js/5.934c18a1.js"><link rel="prefetch" href="/assets/js/6.cf6e0a7b.js"><link rel="prefetch" href="/assets/js/7.4637a5cc.js"><link rel="prefetch" href="/assets/js/8.eb071be2.js"><link rel="prefetch" href="/assets/js/9.127cce51.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6410d9e6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aab9476b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="le"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icon.svg" alt="The AssemblyScript Book" class="logo"> <span class="site-name can-hide">The AssemblyScript Book</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/AssemblyScript/examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Examples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://assemblyscript.slack.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack (with invite)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          General
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://discordapp.com/invite/nEFErF8" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebAssembly Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/AssemblyScript/examples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Examples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://assemblyscript.slack.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack (with invite)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          General
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://discordapp.com/invite/nEFErF8" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebAssembly Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/basics.html" class="sidebar-link">Basics</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/compiler.html" class="sidebar-link">Compiler</a></li><li><a href="/types.html" class="sidebar-link">Types</a></li><li><a href="/environment.html" class="sidebar-link">Environment</a></li><li><a href="/exports-and-imports.html" class="sidebar-link">Exports and imports</a></li><li><a href="/loader.html" aria-current="page" class="active sidebar-link">Loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/loader.html#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#counting-references" class="sidebar-link">Counting references</a></li><li class="sidebar-sub-header"><a href="/loader.html#creating-arrays" class="sidebar-link">Creating arrays</a></li><li class="sidebar-sub-header"><a href="/loader.html#reading-arrays" class="sidebar-link">Reading arrays</a></li><li class="sidebar-sub-header"><a href="/loader.html#custom-classes" class="sidebar-link">Custom classes</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#static-members" class="sidebar-link">Static members</a></li><li class="sidebar-sub-header"><a href="/loader.html#module-instance-utility" class="sidebar-link">Module instance utility</a></li><li class="sidebar-sub-header"><a href="/loader.html#module-instance-runtime-interface" class="sidebar-link">Module instance runtime interface</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#convenience-vs-efficiency" class="sidebar-link">Convenience vs. efficiency</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#more-convenient-tools" class="sidebar-link">More convenient tools</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#advanced-usage" class="sidebar-link">Advanced usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#direct-memory-access" class="sidebar-link">Direct memory access</a></li><li class="sidebar-sub-header"><a href="/loader.html#typescript-definitions" class="sidebar-link">TypeScript definitions</a></li><li class="sidebar-sub-header"><a href="/loader.html#non-js-environments" class="sidebar-link">Non-JS environments</a></li></ul></li></ul></li><li><a href="/built-with-assemblyscript.html" class="sidebar-link">Built with AssemblyScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/memory.html" class="sidebar-link">Memory</a></li><li><a href="/runtime.html" class="sidebar-link">Runtime</a></li><li><a href="/peculiarities.html" class="sidebar-link">Peculiarities</a></li><li><a href="/portability.html" class="sidebar-link">Portability</a></li><li><a href="/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/development.html" class="sidebar-link">Development</a></li><li><a href="/transforms.html" class="sidebar-link">Transforms</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="loader"><a href="#loader" class="header-anchor">#</a> Loader</h1> <p>AssemblyScript provides a tiny <a href="https://github.com/AssemblyScript/assemblyscript/tree/master/lib/loader" target="_blank" rel="noopener noreferrer">module loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that makes working with AssemblyScript modules as convenient as it gets without sacrificing efficiency. It about mirrors the relevant parts of the WebAssembly API while also providing utility to allocate and read strings, arrays and classes.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@assemblyscript/loader&quot;</span><span class="token punctuation">)</span>
loader<span class="token punctuation">.</span><span class="token function">instantiate</span><span class="token punctuation">(</span>
  <span class="token comment">// Binary to instantiate</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;optimized.wasm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// or fs.readFileSync</span>
                           <span class="token comment">// or fs.promises.readFile</span>
                           <span class="token comment">// or just a buffer</span>
  <span class="token comment">// Additional imports</span>
  <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">{</span> exports <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>The loader basically instantiates the module using <code>WebAssembly</code> APIs, but also adds additional utility to it while evaluating export names and making a nice object structure of them. For example, if one exports an entire class <code>Foo</code> from the module, there will be an <code>exports.Foo</code> constructor etc. available when using the loader.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Some of the loader's functionality, like allocating strings and arrays, requires the <a href="/runtime.html">managed runtime</a> interface to be exported to the host, i.e. the <code>full</code> or <code>stub</code> runtimes to be used.</p></div> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>For each version of the AssemblyScript compiler, there is a standalone version of the loader that can be installed from <a href="https://www.npmjs.com/package/@assemblyscript/loader" target="_blank" rel="noopener noreferrer">npm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save @assemblyscript/loader
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you need a <a href="https://github.com/AssemblyScript/assemblyscript/releases" target="_blank" rel="noopener noreferrer">specific version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of the loader, append the respective version number as usual. For each nightly version of the compiler there is a respective nightly of the loader as well.</p></div> <h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <p>One task the loader does not perform is to implicitly translate between WebAssembly pointers and JavaScript objects, and that's where the mixed in utility comes into play. For example, if one has</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><p>and then wants to call <code>concat</code> externally, the string arguments cannot just be JavaScript strings but must first be allocated in the module's memory with their lifetime tracked, like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> concat <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __allocString<span class="token punctuation">,</span> __getString<span class="token punctuation">,</span> __retain<span class="token punctuation">,</span> __release <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doConcat</span><span class="token punctuation">(</span><span class="token parameter">aStr<span class="token punctuation">,</span> bStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> aPtr <span class="token operator">=</span> <span class="token function">__retain</span><span class="token punctuation">(</span><span class="token function">__allocString</span><span class="token punctuation">(</span>aStr<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> bPtr <span class="token operator">=</span> <span class="token function">__retain</span><span class="token punctuation">(</span><span class="token function">__allocString</span><span class="token punctuation">(</span>bStr<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> cPtr <span class="token operator">=</span> <span class="token function">concat</span><span class="token punctuation">(</span>aPtr<span class="token punctuation">,</span> bPtr<span class="token punctuation">)</span> <span class="token comment">// call with pointers</span>
  <span class="token keyword">let</span> cStr <span class="token operator">=</span> <span class="token function">__getString</span><span class="token punctuation">(</span>cPtr<span class="token punctuation">)</span>
  <span class="token function">__release</span><span class="token punctuation">(</span>aPtr<span class="token punctuation">)</span> <span class="token comment">// we are done with aPtr</span>
  <span class="token function">__release</span><span class="token punctuation">(</span>bPtr<span class="token punctuation">)</span> <span class="token comment">// we are done with bPtr</span>
  <span class="token function">__release</span><span class="token punctuation">(</span>cPtr<span class="token punctuation">)</span> <span class="token comment">// we are done with cPtr</span>
  <span class="token keyword">return</span> cStr
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doConcat</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="counting-references"><a href="#counting-references" class="header-anchor">#</a> Counting references</h3> <p>While the above code snippet might look intimidating at first, it isn't that hard to get used to. One can think of <code>__retain</code> as incrementing the reference count by 1 so the object does not become collected while we are working with it, and of <code>__release</code> as decrementing the reference count by 1 again, allowing it to become collected once we don't need a reference to it anymore. That's necessary because the module uses automatic reference counting (ARC) internally, so it needs a bit of cooperation when working with its managed objects externally.</p> <p>Note that we don't need to retain a reference to the value returned by <code>concat</code> in the above snippet, because return values become automatically retained for the caller. A few general rules:</p> <ul><li>Retain a reference when <code>__allocXY</code>ing a string, array or object and release it again when done with it.</li> <li>Don't forget to release a reference to a managed object returned by the module, even if the return value is not used.</li> <li>Does not apply to basic values like <code>i32</code>s or <code>f64</code>s since these aren't objects (don't retain or release these).</li></ul> <h3 id="creating-arrays"><a href="#creating-arrays" class="header-anchor">#</a> Creating arrays</h3> <p>Arrays (or more advanced classes for that matter) require a bit more cooperation because we need to know their value type in order to work with them properly. To achieve this, every class has a unique id internally, and a chunk of runtime type information (RTTI) is shipped with the module to evaluate class types. Here's an example of working with an <code>Int32Array</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token operator">:</span> <span class="token builtin">Int32Array</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">i32</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> <span class="token function">unchecked</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> Int32Array_ID <span class="token operator">=</span> idof<span class="token operator">&lt;</span><span class="token builtin">Int32Array</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> sum<span class="token punctuation">,</span> Int32Array_ID <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __allocArray<span class="token punctuation">,</span> _retain<span class="token punctuation">,</span> __release <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doSum</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrPtr <span class="token operator">=</span> <span class="token function">__retain</span><span class="token punctuation">(</span><span class="token function">__allocArray</span><span class="token punctuation">(</span>Int32Array_ID<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token function">__release</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token keyword">return</span> value
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>This works with all kinds of arrays, except that ids are different and values are interpreted differently, of course.</p> <h3 id="reading-arrays"><a href="#reading-arrays" class="header-anchor">#</a> Reading arrays</h3> <p>If one is instead interested in the values of an array being returned by the module, there are two approaches to this. Let's say we have the following module:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getRandomArray</span><span class="token punctuation">(</span><span class="token parameter">len<span class="token operator">:</span> <span class="token builtin">i32</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int32Array</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
  <span class="token comment">// fill with random values</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
</code></pre></div><p>The first is, obviously, to read the array's values from the module's memory by essentially copying them to a JS array</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getRandomArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getArray<span class="token punctuation">,</span> __release <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doGetRandomArray</span><span class="token punctuation">(</span><span class="token parameter">len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrPtr <span class="token operator">=</span> <span class="token function">getRandomArray</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
  <span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token function">__getArray</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token function">__release</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token keyword">return</span> values
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doGetRandomArray</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>which is always safe, while the second is to create a live view on the array, enabling two-way modification of its values:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getRandomArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getArrayView<span class="token punctuation">,</span> __release <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doGetRandomArrayView</span><span class="token punctuation">(</span><span class="token parameter">len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ptr <span class="token operator">=</span> <span class="token function">getRandomArray</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
  <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token function">__getArrayView</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span>
  <span class="token comment">// do not __release(ptr) yet, but do it once done with the view</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> ptr<span class="token punctuation">,</span> view <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> randomArray <span class="token operator">=</span> <span class="token function">doGetRandomArrayView</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>randomArray<span class="token punctuation">.</span>view<span class="token punctuation">)</span>
<span class="token function">__release</span><span class="token punctuation">(</span>randomArray<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span>
</code></pre></div><p>The latter variant can be more efficient (and useful) but is a little dangerous because the view may become detached from the module's memory when memory automatically grows. Also, the viewed array can grow automatically when pushed to, with the view then referencing random memory. Pushing to an array can be avoided quite easily, yet it is notoriously hard to predict when module memory grows - but one can try to set a sufficiently large size of <code>--initialMemory</code> or defensively trigger a sufficiently large dynamic allocation being freed immediately before dealing with potentially problematic views.</p> <h3 id="custom-classes"><a href="#custom-classes" class="header-anchor">#</a> Custom classes</h3> <p>As mentioned earlier, the loader understands how to make a nice object structure of a module's exports, and it is possible to utilize it to work with classes in a more natural way. For example, when calling the following function externally</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> str<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>str
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Foo <span class="token punctuation">{</span> <span class="token comment">// this one</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>one can wrap the received pointer in a <code>myModule.exports.Foo</code> instance:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Foo<span class="token punctuation">,</span> getFoo <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getString<span class="token punctuation">,</span> __release <span class="token punctuation">}</span> <span class="token operator">=</span> myModule

<span class="token keyword">const</span> fooPtr <span class="token operator">=</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> Foo<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>fooPtr<span class="token punctuation">)</span>
<span class="token keyword">const</span> strPtr <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">__getString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">__release</span><span class="token punctuation">(</span>strPtr<span class="token punctuation">)</span>
<span class="token function">__release</span><span class="token punctuation">(</span>fooPtr<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Remember that pointers to managed objects returned by the module must be <code>__release</code>d when done with them. This is also true for property getters, including those automatically generated for fields. Even though the loader abstracts these away to property accesses like <code>foo.str</code>, getters are still represented by exported functions under the hood.</p></div> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>For reference, here comes the full API provided by the loader.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Copying from and extending the examples above is typically sufficient.</p></div> <h3 id="static-members"><a href="#static-members" class="header-anchor">#</a> Static members</h3> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> instantiate<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  moduleOrBuffer<span class="token operator">:</span> WasmInstantiable<span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>Asynchronously instantiates an AssemblyScript module from anything that can be instantiated.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> instantiateSync<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  moduleOrBuffer<span class="token operator">:</span> WasmInstantiable<span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span>
</code></pre></div><p>Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. Not recommended.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> instantiateStreaming<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  response<span class="token operator">:</span> Response <span class="token operator">|</span> PromiseLike<span class="token operator">&lt;</span>Response<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by fetch.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> demangle<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  exports<span class="token operator">:</span> WasmExports<span class="token punctuation">,</span>
  baseModule<span class="token operator">?</span><span class="token operator">:</span> Object
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>Demangles an AssemblyScript module's exports to a friendly object structure. You usually don't have to call this manually as instantiation does this implicitly.</p></li></ul> <p>Note that <code>T</code> above can either be omitted if the shape of the module is unknown, or can reference a <code>.d.ts</code> (i.e. <code>typeof MyModule</code>) as produced by the compiler with the <code>-d</code> option.</p> <h3 id="module-instance-utility"><a href="#module-instance-utility" class="header-anchor">#</a> Module instance utility</h3> <p>The following utility functions are mixed into the module's exports.</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__allocString</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Allocates a new string in the module's memory and returns a pointer to it.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__allocArray</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> values<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Allocates a new array in the module's memory and returns a pointer to it. Automatically retains interior pointers. The <code>id</code> is the unique runtime id of the respective array class. If you are using <code>Int32Array</code> for example, the best way to know the id is an <code>export const Int32Array_ID = idof&lt;Int32Array&gt;()</code>. When done with the array, make sure to <code>__release</code> it.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getString</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
</code></pre></div><p>Copies a string's value from the module's memory to a JavaScript string. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArrayBuffer</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">ArrayBuffer</span>
</code></pre></div><p>Copies an ArrayBuffer's value from the module's memory to a JavaScript buffer. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArray</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>Copies an array's values from the module's memory to a JavaScript array. Infers the array type from RTTI. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> TypedArray
</code></pre></div><p>Gets a live view on the values of an array in the module's memory. Infers the array type from RTTI. <code>ptr</code> must not be zero.</p> <p>This differs from <code>__getArray</code> in that the data isn't copied but remains live in both directions. That's faster but also unsafe because if the array grows or becomes released, the view will no longer represent the correct memory region and modifying its values in this state will most likely corrupt memory or otherwise explode. Use, but use with care.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getInt8ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int8Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint8ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint8Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint8ClampedArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint8ClampedArray</span>
<span class="token keyword">function</span> <span class="token function">__getInt16ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int16Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint16ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint16Array</span>
<span class="token keyword">function</span> <span class="token function">__getInt32ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int32Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint32ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint32Array</span>
<span class="token keyword">function</span> <span class="token function">__getInt64ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> BigInt64Array
<span class="token keyword">function</span> <span class="token function">__getUint64ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> BigUint64Array
<span class="token keyword">function</span> <span class="token function">__getFloat32ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Float32Array</span>
<span class="token keyword">function</span> <span class="token function">__getFloat64ArrayView</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Float64Array</span>
</code></pre></div><p>Slightly more efficient variants of <code>__getArrayView</code> where the type of the array is know beforehand. Doesn't try to infer the type.</p></li></ul> <h3 id="module-instance-runtime-interface"><a href="#module-instance-runtime-interface" class="header-anchor">#</a> Module instance runtime interface</h3> <p>The runtime interface is directly exported by the module, so also present as part of the module's exports. Also see the <a href="/runtime.html">managed runtime</a> documentation for all the details.</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__retain</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Retains a reference to a managed object represented by a pointer to it, making sure that it doesn't become collected prematurely. Returns the pointer.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__release</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><p>Releases a previously retained reference to a managed object, allowing the runtime to collect it once its reference count reaches zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__alloc</span><span class="token punctuation">(</span><span class="token parameter">size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Allocates an instance of the class represented by the specified id. If you are using <code>MyClass</code> for example, the best way to know the id and the necessary size is an <code>export const MYCLASS_ID = idof&lt;MyClass&gt;()</code> and an <code>export const MYCLASS_SIZE = offsetof&lt;MyClass&gt;()</code>. Afterwards, use the respective views to assign values to the class's memory while making sure to retain interior references to other managed objects once. When done with the class, make sure to <code>__release</code> it, which will automatically release any interior references once the class becomes collected.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__instanceof</span><span class="token punctuation">(</span><span class="token parameter">ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> baseId<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
</code></pre></div><p>Tests whether an object is an instance of the class represented by the specified <code>baseId</code>.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><p>Forces a cycle collection. Only relevant if objects potentially forming reference cycles are used.</p></li></ul> <h2 id="convenience-vs-efficiency"><a href="#convenience-vs-efficiency" class="header-anchor">#</a> Convenience vs. efficiency</h2> <p>Making the loader's API any more convenient has its tradeoffs. One would either have to include extended type information with the module itself or generate an additional JavaScript file of glue code that does (and hides) all the lifting. As such, one can consider the loader as a small and efficient building block that can do it all, yet does not sacrifice efficiency. The design choice here is that an efficient helper can be wrapped in a way that it becomes more convenient, but it's often not possible anymore to make a convenient helper more efficient the other way around. However, if that's not exactly what you are looking for, take a look at more convenient tools below. Just remember that these have tradeoffs.</p> <h3 id="more-convenient-tools"><a href="#more-convenient-tools" class="header-anchor">#</a> More convenient tools</h3> <ul><li><a href="https://github.com/torch2424/as-bind" target="_blank" rel="noopener noreferrer">as-bind<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a library, built on top of the loader, to make passing high-level data structures between AssemblyScript and JavaScript more convenient.</li></ul> <h2 id="advanced-usage"><a href="#advanced-usage" class="header-anchor">#</a> Advanced usage</h2> <h3 id="direct-memory-access"><a href="#direct-memory-access" class="header-anchor">#</a> Direct memory access</h3> <p>All of the above can be mixed with direct <a href="/memory.html">memory</a> accesses on <code>myModule.exports.memory.buffer</code>, for instance by adhering to <a href="/interoperability.html#class-layout">class layout</a>. Just note that directly loading a pointer (to a managed object) from the module's memory also requires <code>__retain</code>ing a reference (unlike <code>return</code> values that become retained for the caller automatically).</p> <h3 id="typescript-definitions"><a href="#typescript-definitions" class="header-anchor">#</a> TypeScript definitions</h3> <p>The compiler is able to emit definitions using the <code>-d</code> command line option that are compatible with modules demangled by the loader, and these can be used for proper typings in development:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// TypeScript</span>
<span class="token keyword">import</span> MyModule <span class="token keyword">from</span> <span class="token string">&quot;myModule&quot;</span><span class="token punctuation">;</span> <span class="token comment">// pointing at the generated d.ts</span>

loader<span class="token punctuation">.</span>instatiate<span class="token operator">&lt;</span><span class="token keyword">typeof</span> MyModule<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;myModule.wasm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">{</span> exports <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="non-js-environments"><a href="#non-js-environments" class="header-anchor">#</a> Non-JS environments</h3> <p>Also, if the host environment is not JavaScript, the runtime interface utilized by the loader is of course still available as part of the module's exports (minus the loader utilities, <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/lib/loader/index.js" target="_blank" rel="noopener noreferrer">see<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), so one can work with managed objects in a similar way when embedding an AssemblyScript module into a C++ or Rust host by sticking to what the loader would do.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/AssemblyScript/website/edit/master/src/loader.md" target="_blank" rel="noopener noreferrer">Help us to improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/exports-and-imports.html" class="prev">
        Exports and imports
      </a></span> <span class="next"><a href="/built-with-assemblyscript.html">
        Built with AssemblyScript
      </a>
      →
    </span></p></div> <div class="footer">Copyright © 2020 The AssemblyScript Project | Apache-2.0</div></main></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/custom.93ba50cc.js" defer></script><script src="/assets/js/12.3c2d6cf1.js" defer></script><script src="/assets/js/4.446cbf45.js" defer></script><script src="/assets/js/22.0bfe5a4b.js" defer></script><script src="/assets/js/app.5bed4dc4.js" defer></script>
  </body>
</html>
